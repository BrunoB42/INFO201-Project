happy_df <- filter(happy_df, year == 2010:2018)
happy_df <- filter(happy_df, Year == 2010:2018)
View(happy_df)
happy_df <- filter(happy_df, Year == 2008:2018)
happy_df <- filter(happy_df, Year == 2011:2018)
View(happy_df)
happy_df <- read.csv('data/UNRawHappinessData.csv', stringsAsFactors = FALSE)
View(happy_df)
health_expenditure <- wb(country = "countries_only", cache = updated_cache, indicator = c("SH.XPD.CHEX.GD.ZS"), mrv = 20) %>%
filter(date == 2010:2018)
happy_df <- filter(happy_df, Year == 2010:2018)
View(happy_df)
health_expenditure <- wb(country = "countries_only", cache = updated_cache, indicator = c("SH.XPD.CHEX.GD.ZS"), mrv = 20)
happy_df <- read.csv('data/UNRawHappinessData.csv', stringsAsFactors = FALSE)
View(expectancy)
ggplot(data = expectancy, mapping = aes(x = value, y = Health.life.expectancy.at.birth, group = country)) +
geom_point()
ggplot(data = expectancy, mapping = aes(x = value, y = Health.life.expectancy.at.birth)) +
geom_point()
ggplot(data = expectancy, mapping = aes(x = value, y = Healthly.life.expectancy.at.birth)) +
geom_point()
colnames(expectancy)
ggplot(data = expectancy, mapping = aes(x = value, y = Healthy.life.expectancy.at.birth)) +
geom_point()
expectancy <- left_join(health_expenditure, happy_df, by = "country") %>%
filter(date == 2016 & Year == 2016)
colnames(happy_df)[1] <-  "country"
expectancy <- left_join(health_expenditure, happy_df, by = "country") %>%
filter(date == 2016 & Year == 2016)
View(expectancy)
expectancy <- left_join(health_expenditure, happy_df, by = "country") %>%
#filter(date == 2016 & Year == 2016) %>%
group_by(iso3c) %>%
summarise(
spending = sum(value),
Avg_life_expectancy=sum(Healthy.life.expectancy.at.birth)
)
View(expectancy)
expectancy <- left_join(health_expenditure, happy_df, by = "country")
View(expectancy)
expectancy <- left_join(health_expenditure, happy_df, by = "country") %>%
#filter(date == 2016 & Year == 2016) %>%
group_by(iso3c) %>%
summarise(
spending = sum(value)/n(date),
Avg_life_expectancy=sum(Healthy.life.expectancy.at.birth)/ n(Year)
)
expectancy <- left_join(health_expenditure, happy_df, by = "country") %>%
#filter(date == 2016 & Year == 2016) %>%
group_by(iso3c) %>%
summarise(
spending = sum(value)/count(date),
Avg_life_expectancy=sum(Healthy.life.expectancy.at.birth)/ n(Year)
)
expectancy <- left_join(health_expenditure, happy_df, by = "country") %>%
#filter(date == 2016 & Year == 2016) %>%
group_by(iso3c) %>%
summarise(
spending = mean(value),
Avg_life_expectancy=mean(Healthy.life.expectancy.at.birth)
)
View(expectancy)
ggplot(data = expectancy, mapping = aes(x = iso3c, y = (spending , Avg_life_expectancy))) +
geom_col()
ggplot(data = expectancy, mapping = aes(x = iso3c, y = (spending, Avg_life_expectancy))) +
geom_col()
gather(expectancy,
key = Category,
value = value,
-iso3c)
View(expectancy)
expectancy_final <- gather(expectancy,
key = Category,
value = value,
-iso3c)
View(expectancy_final)
ggplot(data = expectancy, mapping = aes(x = iso3c, y = value, fill = Category)) +
geom_col()
ggplot(data = expectancy_final, mapping = aes(x = iso3c, y = value, fill = Category)) +
geom_col()
ggplot(data = expectancy_final, mapping = aes(x = iso3c, y = value, fill = Category)) +
geom_col(position = "dodge")
pull(country)
countries <- wbcountries() %>%
filter(income == "High income")
pull(country)
countries <- wbcountries() %>%
filter(income == "High income") %>%
pull(country)
updated_cache <- wbcache()
health_expenditure <- wb(country = "countries_only", cache = updated_cache, indicator = c("SH.XPD.CHEX.GD.ZS"), mrv = 20)
happy_df <- read.csv('data/UNRawHappinessData.csv', stringsAsFactors = FALSE)
colnames(happy_df)[1] <-  "country"
expectancy <- left_join(health_expenditure, happy_df, by = "country") %>%
#filter(date == 2016 & Year == 2016) %>%
group_by(iso3c) %>%
summarise(
spending = mean(value),
Avg_life_expectancy=mean(Healthy.life.expectancy.at.birth)
)
expectancy_final <- gather(expectancy,
key = Category,
value = value,
-iso3c)
ggplot(data = expectancy_final, mapping = aes(x = iso3c, y = value, fill = Category)) +
geom_col(position = "dodge")
View(expectancy_final)
countries <- wbcountries() %>%
filter(income == "High income")
View(countries)
countries <- wbcountries() %>%
filter(income == "High income") %>%
pull(country)
View(expectancy_final)
expectancy_final <- gather(expectancy,
key = Category,
value = value,
-iso3c) %>%
arrange(country)
expectancy_final <- gather(expectancy,
key = Category,
value = value,
-iso3c) %>%
arrange(iso3c)
View(expectancy_final)
expectancy_final <- gather(expectancy,
key = Category,
value = value,
-iso3c) %>%
arrange(iso3c) %>%
head(20)
ggplot(data = expectancy_final, mapping = aes(x = iso3c, y = value, fill = Category)) +
geom_col(position = "dodge")
ggplot(data = expectancy_final, mapping = aes(x = reorder(iso3c, value), y = value, fill = Category)) +
geom_col(position = "dodge")
ggplot(data = expectancy_final, mapping = aes(x = reorder(iso3c, value), y = value, fill = Category)) +
geom_col(position = "dodge")+
labs(title= "Health Care Expenditures Effect on Healthy Life Expectancy", x = "Country", y = "Value")
ggplot(data = expectancy_final, mapping = aes(x = reorder(iso3c, value), y = value, fill = Category)) +
geom_col(position = "dodge")+
labs(title= "Health Care Expenditures Compared to Healthy Life Expectancy", x = "Country", y = "Value")+
scale_color_fill(name = "Category", breaks = c("Avg_life_expectancy", "spending"),
labels = c("Healthy Life expectancy", "Spending(% of GDP)"))
ggplot(data = expectancy_final, mapping = aes(x = reorder(iso3c, value), y = value, fill = Category)) +
geom_col(position = "dodge")+
labs(title= "Health Care Expenditures Compared to Healthy Life Expectancy", x = "Country", y = "Value")+
scale_color_discrete(name = "Category", breaks = c("Avg_life_expectancy", "spending"),
labels = c("Healthy Life expectancy", "Spending(% of GDP)"))
ggplot(data = expectancy_final, mapping = aes(x = reorder(iso3c, value), y = value, fill = Category)) +
geom_col(position = "dodge")+
labs(title= "Health Care Expenditures Compared to Healthy Life Expectancy", x = "Country", y = "Value")+
scale_fill_discrete(name = "Category", breaks = c("Avg_life_expectancy", "spending"),
labels = c("Healthy Life expectancy", "Spending(% of GDP)"))
expectancy_final<-expectancy_final[which(, !is.na(expectancy_final$Category == "spending") & !is.na(expectancy_final$Category == "Avg_life_expectancy"))]
which?
?which
expectancy_final<- expectancy_final[, which(!is.na(expectancy_final$Category == "spending") & !is.na(expectancy_final$Category == "Avg_life_expectancy"))]
View(expectancy_final)
expectancy_final <- gather(expectancy,
key = Category,
value = value,
-iso3c) %>%
arrange(iso3c)
expectancy_final <- gather(expectancy,
key = Category,
value = value,
-iso3c) %>%
arrange(iso3c) %>%
head(10)
ggplot(data = expectancy_final, mapping = aes(x = reorder(iso3c, value), y = value, fill = Category)) +
geom_col(position = "dodge")+
labs(title= "Health Care Expenditures Compared to Healthy Life Expectancy", x = "Country", y = "Value")+
scale_fill_discrete(name = "Category", breaks = c("Avg_life_expectancy", "spending"),
labels = c("Healthy Life expectancy", "Spending(% of GDP)"))
expectancy_final <- gather(expectancy,
key = Category,
value = value,
-iso3c) %>%
arrange(iso3c)
View(expectancy_final)
ggplot(data = expectancy_final, mapping = aes(x = reorder(iso3c, Category), y = value, fill = Category)) +
geom_col(position = "dodge")+
labs(title= "Health Care Expenditures Compared to Healthy Life Expectancy", x = "Country", y = "Value")+
scale_fill_discrete(name = "Category", breaks = c("Avg_life_expectancy", "spending"),
labels = c("Healthy Life expectancy", "Spending(% of GDP)"))
expectancy_final <- gather(expectancy,
key = Category,
value = value,
-iso3c) %>%
arrange(iso3c) %>%
head(10)
ggplot(data = expectancy_final, mapping = aes(x = reorder(iso3c, Category), y = value, fill = Category)) +
geom_col(position = "dodge")+
labs(title= "Health Care Expenditures Compared to Healthy Life Expectancy", x = "Country", y = "Value")+
scale_fill_discrete(name = "Category", breaks = c("Avg_life_expectancy", "spending"),
labels = c("Healthy Life expectancy", "Spending(% of GDP)"))
ggplot(data = expectancy_final, mapping = aes(x = reorder(iso3c, value), y = value, fill = Category)) +
geom_col(position = "dodge")+
labs(title= "Health Care Expenditures Compared to Healthy Life Expectancy", x = "Country", y = "Value")+
scale_fill_discrete(name = "Category", breaks = c("Avg_life_expectancy", "spending"),
labels = c("Healthy Life expectancy", "Spending(% of GDP)"))
View(expectancy_final)
expectancy_final <- gather(expectancy,
key = Category,
value = value,
-iso3c) %>%
arrange(iso3c) %>%
filter(!is.na(value))
View(expectancy_final)
expectancy_final<- expectancy_final[, which(!is.na(expectancy_final$Category )]
expectancy_final<- expectancy_final[, which(!is.na(expectancy_final$Category))]
View(expectancy_final)
expectancy_final <- gather(expectancy,
key = Category,
value = value,
-iso3c) %>%
arrange(iso3c) %>%
arrange(-value) %>%
filter(!is.na(value))
View(expectancy_final)
expectancy_final <- gather(expectancy,
key = Category,
value = value,
-iso3c) %>%
arrange(iso3c) %>%
filter(!is.na(value))
expectancy_final <- gather(expectancy,
key = Category,
value = value,
-iso3c) %>%
arrange(iso3c) %>%
filter(!is.na(value)) %>%
head(12)
ggplot(data = expectancy_final, mapping = aes(x = reorder(iso3c, value), y = value, fill = Category)) +
geom_col(position = "dodge")+
labs(title= "Health Care Expenditures Compared to Healthy Life Expectancy", x = "Country", y = "Value")+
scale_fill_discrete(name = "Category", breaks = c("Avg_life_expectancy", "spending"),
labels = c("Healthy Life expectancy", "Spending(% of GDP)"))
expectancy_final <- gather(expectancy,
key = Category,
value = value,
-iso3c) %>%
arrange(iso3c) %>%
filter(!is.na(value))
View(expectancy_final)
expectancy <- left_join(health_expenditure, happy_df, by = "country") %>%
#filter(date == 2016 & Year == 2016) %>%
group_by(iso3c) %>%
summarise(
spending = mean(value),
Avg_life_expectancy=mean(Healthy.life.expectancy.at.birth)
)
View(expectancy)
ggplot(data = expectancy, mapping = aes(x = spending, y = Avg_life_expectancy))+
geom_point()+
geom_line()
ggplot(data = expectancy, mapping = aes(x = spending, y = Avg_life_expectancy))+
geom_point()
ggplot(data = expectancy, mapping = aes(x = spending, y = Avg_life_expectancy))+
geom_point()+
geom_smooth()
ggplot(data = expectancy, mapping = aes(x = spending, y = Avg_life_expectancy))+
geom_point()+
geom_smooth(y~x)
ggplot(data = expectancy, mapping = aes(x = spending, y = Avg_life_expectancy))+
geom_point()+
geom_smooth(method = "lm" , formula = y~x)
ggplot(data = expectancy, mapping = aes(x = spending, y = Avg_life_expectancy))+
geom_point()+
geom_smooth(method = "lm" , formula = y~x)+
labs(title= "Health Care Expenditures Compared to Healthy Life Expectancy", x = "Spending(% of GDP)", y = "Healthy Life Expectancy")
?xlim
ggplot(data = expectancy, mapping = aes(x = spending, y = Avg_life_expectancy))+
geom_point()+
geom_smooth(method = "lm" , formula = y~x)+
labs(title= "Health Care Expenditures Compared to Healthy Life Expectancy", x = "Spending(% of GDP)", y = "Healthy Life Expectancy")+
xlim(0,17)
ggplot(data = expectancy, mapping = aes(x = spending, y = Avg_life_expectancy))+
geom_point()+
geom_smooth(method = "lm" , formula = y~x)+
labs(title= "Health Care Expenditures Compared to Healthy Life Expectancy", x = "Spending(% of GDP)", y = "Healthy Life Expectancy")+
xlim(1,17)
View(expectancy_final)
expectancy_final <- gather(expectancy,
key = Category,
value = value,
-iso3c) %>%
arrange(iso3c) %>%
filter(!is.na(value)) %>%
select(iso3c, spending)
expectancy_spend <- gather(expectancy,
key = Category,
value = value,
-iso3c) %>%
arrange(iso3c) %>%
filter(!is.na(value)) %>%
select(iso3c, spending)
expectancy_spend <- arrange(expectancy, iso3c) %>%
select(iso3c, spending) %>%
filter(!is.na(value))
expectancy_spend <- arrange(expectancy, iso3c) %>%
select(iso3c, spending) %>%
filter(!is.na(spending))
View(expectancy_spend)
ggplot(data = expectancy_final, mapping = aes(x = reorder(iso3c, spending), y = spending)) +
labs(title= "Health Care Expenditures per Country", x = "Country", y = "Spending(% of GDP")
ggplot(data = expectancy_spend, mapping = aes(x = reorder(iso3c, spending), y = spending)) +
labs(title= "Health Care Expenditures per Country", x = "Country", y = "Spending(% of GDP")
expectancy_spend <- arrange(expectancy, iso3c) %>%
select(iso3c, spending) %>%
filter(!is.na(spending)) %>%
ggplot(data = expectancy_spend, mapping = aes(x = reorder(iso3c, spending), y = spending)) +
labs(title= "Health Care Expenditures per Country", x = "Country", y = "Spending(% of GDP)")
expectancy_spend <- arrange(expectancy, iso3c) %>%
select(iso3c, spending) %>%
filter(!is.na(spending)) %>%
ggplot(data = expectancy_spend, mapping = aes(x = reorder(iso3c, spending), y = spending)) +
geom_col()+
labs(title= "Health Care Expenditures per Country", x = "Country", y = "Spending(% of GDP)")
expectancy_spend <- arrange(expectancy, iso3c) %>%
select(iso3c, spending) %>%
filter(!is.na(spending))
ggplot(data = expectancy_spend, mapping = aes(x = reorder(iso3c, spending), y = spending)) +
geom_col()+
labs(title= "Health Care Expenditures per Country", x = "Country", y = "Spending(% of GDP)")
expectancy_spend <- arrange(expectancy, iso3c) %>%
select(iso3c, spending) %>%
filter(!is.na(spending)) %>%
head(10)
ggplot(data = expectancy_spend, mapping = aes(x = reorder(iso3c, spending), y = spending)) +
geom_col()+
labs(title= "Health Care Expenditures per Country", x = "Country", y = "Spending(% of GDP)")
countries_in_both <- intersect(health_expenditure, happy_df)
health_expenditure <- wb(country = "countries_only", cache = updated_cache, indicator = c("SH.XPD.CHEX.GD.ZS"), mrv = 20)
happy_df <- read.csv('data/UNRawHappinessData.csv', stringsAsFactors = FALSE)
colnames(happy_df)[1] <-  "country"
countries_in_both <- intersect(health_expenditure$country, happy_df$country)
health_expenditure <- wb(country = "countries_only", cache = updated_cache, indicator = c("SH.XPD.CHEX.GD.ZS"), mrv = 20)
happy_df <- read.csv('data/UNRawHappinessData.csv', stringsAsFactors = FALSE)
colnames(happy_df)[1] <-  "country"
countries_in_both <- intersect(health_expenditure$country, happy_df$country)
health_expenditure <- filter(health_expenditure, health_expenditure$country==countries_in_both)
happy_df <- filter(happy_df, happy_df$country==countries_in_both)
health_expenditure <- wb(country = "countries_only", cache = updated_cache, indicator = c("SH.XPD.CHEX.GD.ZS"), mrv = 20)
happy_df <- read.csv('data/UNRawHappinessData.csv', stringsAsFactors = FALSE)
colnames(happy_df)[1] <-  "country"
countries_in_both <- intersect(health_expenditure$country, happy_df$country)
health_expenditure <- filter(health_expenditure, health_expenditure$country %in% countries_in_both)
happy_df <- filter(happy_df, happy_df$country %in% countries_in_both)
health_expenditure <- filter(health_expenditure, health_expenditure$country %in% countries_in_both)
happy_df <- filter(happy_df, happy_df$country %in% countries_in_both)
expectancy <- left_join(health_expenditure, happy_df, by = "country") %>%
#filter(date == 2016 & Year == 2016) %>%
group_by(iso3c) %>%
summarise(
spending = mean(value),
Avg_life_expectancy=mean(Healthy.life.expectancy.at.birth)
)
expectancy_spend <- arrange(expectancy, iso3c) %>%
select(iso3c, spending) %>%
filter(!is.na(spending)) %>%
head(10)
ggplot(data = expectancy_spend, mapping = aes(x = reorder(iso3c, spending), y = spending)) +
geom_col()+
labs(title= "Health Care Expenditures per Country", x = "Country", y = "Spending(% of GDP)")
expectancy_spend <- arrange(expectancy, iso3c) %>%
select(iso3c, spending) %>%
filter(!is.na(spending))
ggplot(data = expectancy_spend, mapping = aes(x = reorder(iso3c, spending), y = spending)) +
geom_col()+
labs(title= "Health Care Expenditures per Country", x = "Country", y = "Spending(% of GDP)")
expectancy_spend <- arrange(expectancy, iso3c) %>%
select(iso3c, spending) %>%
filter(!is.na(spending)) %>%
head(50)
ggplot(data = expectancy_spend, mapping = aes(x = reorder(iso3c, spending), y = spending)) +
geom_col()+
labs(title= "Health Care Expenditures per Country", x = "Country", y = "Spending(% of GDP)")
expectancy_spend <- arrange(expectancy, iso3c) %>%
select(iso3c, spending) %>%
filter(!is.na(spending)) %>%
head(30)
ggplot(data = expectancy_spend, mapping = aes(x = reorder(iso3c, spending), y = spending)) +
geom_col()+
labs(title= "Health Care Expenditures per Country", x = "Country", y = "Spending(% of GDP)")
ggplot(data = expectancy_spend, mapping = aes(x = reorder(iso3c, spending), y = spending)) +
geom_col()+
labs(title= "Health Care Expenditures per Country", x = "Country", y = "Spending(% of GDP)")+
#Compares Health Care Spending(% of GDP) to Healthy Life Expectancy for High income countries
ggplot(data = expectancy, mapping = aes(x = spending, y = Avg_life_expectancy))+
geom_point()+
geom_smooth(method = "lm" , formula = y~x)+
labs(title= "Health Care Expenditures Compared to Healthy Life Expectancy", x = "Spending(% of GDP)", y = "Healthy Life Expectancy")+
xlim(1,17)
ggplot(data = expectancy, mapping = aes(x = spending, y = Avg_life_expectancy))+
geom_point()+
geom_smooth(method = "lm" , formula = y~x)+
labs(title= "Health Care Expenditures Compared to Healthy Life Expectancy", x = "Spending(% of GDP)", y = "Healthy Life Expectancy")+
xlim(1,17)
ggplot(data = expectancy_spend, mapping = aes(x = reorder(iso3c, spending), y = spending)) +
geom_col()+
labs(title= "Health Care Expenditures per Country", x = "Country", y = "Spending(% of GDP)")+
geom_linerange(data= expectancy_spend, mapping = aes(ymin= 0,  ymax= spending))
ggplot(data = expectancy_spend, mapping = aes(x = reorder(iso3c, spending), y = spending)) +
geom_col()+
labs(title= "Health Care Expenditures per Country", x = "Country", y = "Spending(% of GDP)")+
theme(axis.text.x = element_text(size= 5,angle= 90))
ggplot(data = expectancy_spend, mapping = aes(x = reorder(iso3c, spending), y = spending)) +
geom_col()+
labs(title= "Health Care Expenditures per Country", x = "Country", y = "Spending(% of GDP)")+
theme(axis.text.x = element_text(size= 5,angle= 90))+
#Compares Health Care Spending(% of GDP) to Healthy Life Expectancy for High income countries
ggplot(data = expectancy, mapping = aes(x = spending, y = Avg_life_expectancy))+
geom_point()+
geom_smooth(method = "lm" , formula = y~x)+
labs(title= "Health Care Expenditures Compared to Healthy Life Expectancy", x = "Spending(% of GDP)", y = "Healthy Life Expectancy")+
xlim(1,17)
#Compares Health Care Spending(% of GDP) to Healthy Life Expectancy for High income countries
ggplot(data = expectancy, mapping = aes(x = spending, y = Avg_life_expectancy))+
geom_point()+
geom_smooth(method = "lm" , formula = y~x)+
labs(title= "Health Care Expenditures Compared to Healthy Life Expectancy", x = "Spending(% of GDP)", y = "Healthy Life Expectancy")+
xlim(1,17)
Country_spend <-
ggplot(data = expectancy_spend, mapping = aes(x = reorder(iso3c, spending), y = spending)) +
geom_col()+
labs(title= "Health Care Expenditures per Country", x = "Country", y = "Spending(% of GDP)")+
theme(axis.text.x = element_text(size= 5,angle= 90))+
scale_fill_brewer(fill = iso3c)
Country_spend <-
ggplot(data = expectancy_spend, mapping = aes(x = reorder(iso3c, spending), y = spending, fill = iso3c)) +
geom_col()+
labs(title= "Health Care Expenditures per Country", x = "Country", y = "Spending(% of GDP)")+
theme(axis.text.x = element_text(size= 5,angle= 90))
ggplot(data = expectancy_spend, mapping = aes(x = reorder(iso3c, spending), y = spending, fill = iso3c)) +
geom_col()+
labs(title= "Health Care Expenditures per Country", x = "Country", y = "Spending(% of GDP)")+
theme(axis.text.x = element_text(size= 5,angle= 90))
Country_spend <-
ggplot(data = expectancy_spend, mapping = aes(x = reorder(iso3c, spending), y = spending)) +
geom_col()+
labs(title= "Health Care Expenditures per Country", x = "Country", y = "Spending(% of GDP)")+
theme(axis.text.x = element_text(size= 5,angle= 90))
ggplot(data = expectancy_spend, mapping = aes(x = reorder(iso3c, spending), y = spending)) +
geom_col()+
labs(title= "Health Care Expenditures per Country", x = "Country", y = "Spending(% of GDP)")+
theme(axis.text.x = element_text(size= 5,angle= 90))
Country_spend <-ggplot(data = expectancy_spend, mapping = aes(x = reorder(iso3c, spending), y = spending)) +
geom_col()+
labs(title= "Health Care Expenditures per Country", x = "Country", y = "Spending(% of GDP)")+
theme(axis.text.x = element_text(size= 5,angle= 90))
setwd("~/Desktop/book-exercises/chapter-19-exercises/exercise-4")
shiny::runApp()
View(income_growth)
View(expectancy)
View(happy_df)
#Compares Health Care Spending(% of GDP) to Healthy Life Expectancy for High income countries
ggplot(data = expectancy, mapping = aes(x = spending, y = Avg_life_expectancy))+
geom_point()+
geom_smooth(method = "lm" , formula = y~x)+
labs(title= "Health Care Expenditures Compared to Healthy Life Expectancy", x = "Average Spending(% of GDP)", y = "Healthy Life Expectancy")+
xlim(1,17)
#Compares Health Care Spending(% of GDP) to Healthy Life Expectancy for High income countries
Health_plot <- ggplot(data = expectancy, mapping = aes(x = spending, y = Avg_life_expectancy))+
geom_point()+
geom_smooth(method = "lm" , formula = y~x)+
labs(title= "Health Care Expenditures Compared to Healthy Life Expectancy", x = "Average Spending(% of GDP)", y = "Healthy Life Expectancy")+
xlim(1,17)
setwd("~/Desktop/INFO201-Project")
View(expectancy)
View(happy_df)
expectancy <- left_join(health_expenditure, happy_df, by = "country")
View(expectancy)
View(expectancy)
View(expectancy)
expectancy <- left_join(health_expenditure, happy_df, by = "country")
library(dplyr)
library(tidyr)
library(ggplot2)
library(wbstats)
expectancy <- left_join(health_expenditure, happy_df, by = "country")
View(expectancy)
expectancy_USA <- left_join(health_expenditure, happy_df, by = "country") %>%
filter(iso3c == "USA")
View(expectancy_spend)
View(expectancy_USA)
expectancy_USA <- left_join(health_expenditure, happy_df, by = "country") %>%
filter(iso3c == "USA") %>%
group_by(date) %>%
summarise(
spending = mean(value),
Life_expectancy = mean(Healthy.life.expectancy.at.birth)
)
View(expectancy_USA)
updated_cache <- wbcache()
health_expenditure <- wb(country = "countries_only", cache = updated_cache, indicator = c("SH.XPD.CHEX.GD.ZS"), mrv = 20)
happy_df <- read.csv('data/UNRawHappinessData.csv', stringsAsFactors = FALSE)
colnames(happy_df)[1] <-  "country"
countries_in_both <- intersect(health_expenditure$country, happy_df$country)
health_expenditure <- filter(health_expenditure, health_expenditure$country %in% countries_in_both)
happy_df <- filter(happy_df, happy_df$country %in% countries_in_both)
expectancy <- left_join(health_expenditure, happy_df, by = "country") %>%
#filter(date == 2016 & Year == 2016) %>%
group_by(iso3c) %>%
summarise(
spending = mean(value),
Avg_life_expectancy=mean(Healthy.life.expectancy.at.birth)
)
expectancy_spend <- arrange(expectancy, iso3c) %>%
select(iso3c, spending) %>%
filter(!is.na(spending)) %>%
head(30)
